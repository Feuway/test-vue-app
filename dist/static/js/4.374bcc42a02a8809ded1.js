webpackJsonp([4],{324:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:t.loading,expression:"loading",modifiers:{fullscreen:!0}}]},[a("el-row",[a("el-col",{staticClass:"container"},[t.dataPost?a("el-card",[a("template",{slot:"header"},[a("h1",[t._v(t._s(t.dataPost.title))])]),a("div",{staticClass:"post__content"},[a("p",[t._v(t._s(t.dataPost.body))]),a("p",[t._v(t._s(t.dataPost.body)+t._s(t.dataPost.body))]),a("p",[t._v(t._s(t.dataPost.body)+t._s(t.dataPost.body))]),a("p",[t._v(t._s(t.dataPost.body)+t._s(t.dataPost.body)+t._s(t.dataPost.body))]),a("p",[t._v(t._s(t.dataPost.body))]),a("p",[t._v(t._s(t.dataPost.body))]),a("p",[t._v(t._s(t.dataPost.body))]),a("p",[t._v(t._s(t.dataPost.body))]),a("p",[t._v(t._s(t.dataPost.body))]),a("p",[t._v(t._s(t.dataPost.body))]),a("el-rate",{attrs:{disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value} points"},model:{value:t.rating,callback:function(e){t.rating=e},expression:"rating"}}),a("el-row",{staticClass:"container"},[a("el-button",{attrs:{type:"text"},on:{click:function(e){t.$router.push({name:"User",params:{id:t.dataPost.userId}})}}},[t._v("\n              Author\n            ")])],1)],1)],2):t._e()],1),a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingComments,expression:"loadingComments"}],staticClass:"container"},[a("el-card",{staticStyle:{"min-height":"200px"}},[[a("el-collapse-transition",[t.isVisibleFormComment?t._e():a("el-row",[a("el-button",{staticStyle:{width:"100%"},on:{click:function(e){t.isVisibleFormComment=!0}}},[t._v("\n                Leave your comment\n              ")])],1)],1)],[a("el-collapse-transition",[t.isVisibleFormComment?a("el-row",{staticClass:"container",attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{sm:16}},[a("el-form",{ref:"dataFormComment",staticStyle:{padding:"0 20px"},attrs:{model:t.dataFormComment,rules:t.rulesFormComment,"label-width":"100px"}},[a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"Name",prop:"name"}},[a("el-input",{attrs:{disabled:t.loadingFormComment},model:{value:t.dataFormComment.name,callback:function(e){t.$set(t.dataFormComment,"name",e)},expression:"dataFormComment.name"}})],1)],1),a("el-col",[a("el-form-item",{attrs:{label:"Email",prop:"email"}},[a("el-input",{attrs:{disabled:t.loadingFormComment},model:{value:t.dataFormComment.email,callback:function(e){t.$set(t.dataFormComment,"email",e)},expression:"dataFormComment.email"}})],1)],1),a("el-col",[a("el-form-item",{attrs:{label:"Comment",prop:"body"}},[a("el-input",{attrs:{type:"textarea",disabled:t.loadingFormComment},model:{value:t.dataFormComment.body,callback:function(e){t.$set(t.dataFormComment,"body",e)},expression:"dataFormComment.body"}})],1)],1)],1)],1),a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-button",{attrs:{disabled:t.loadingFormComment},on:{click:function(e){t.isVisibleFormComment=!1}}},[t._v("\n                    Close\n                  ")]),a("el-button",{attrs:{type:"primary",loading:t.loadingFormComment},on:{click:t.onSaveComment}},[t._v("\n                    Save\n                  ")])],1)],1)],1):t._e()],1)],t.dataPost?[a("ul",{staticClass:"list"},t._l(t.listComments,function(e){return a("li",{key:e.id,staticClass:"list-item"},[a("span",{staticClass:"list-item__tip"},[t._v(t._s(e.name))]),a("p",{staticClass:"list-item__text"},[t._v('"'+t._s(e.body)+'"')])])}))]:[a("span",[t._v("\n            Empty\n          ")])]],2)],1)],1)],1)},n=[],s=a(30),r=a.n(s),i=a(31),m=a.n(i),l=a(32),d=a.n(l),c=a(19),u=a.n(c),p=a(55),b=a.n(p),v=a(91),C={name:"Post",props:{id:{type:[String,Number],required:!0}},data:function(){return{loading:!1,loadingComments:!1,loadingFormComment:!1,listComments:[],isVisibleFormComment:!1,dataFormComment:{postId:this.id,name:"",email:"",body:""},rulesFormComment:{name:[{required:!0,message:"Please input email",trigger:"change"},{min:3,max:10,message:"Length should be 3 to 10",trigger:"blur"}],email:[{required:!0,message:"Please input email",trigger:"change"},{type:"email",message:"Not valid format",trigger:"blur"}],body:[{required:!0,message:"Please input comment",trigger:"change"}]}}},computed:b()({},Object(v.c)(["getPostById"]),{dataPost:function(){return this.getPostById(Number(this.id))},rating:function(){var t=5*Math.random();return Number(t.toFixed(1))}}),watch:{dataPost:function(t){t&&"object"===(void 0===t?"undefined":u()(t))&&this.getComments()}},methods:b()({},Object(v.b)(["fetchListPosts","fetchListCommentsToPost","addCommentToPost"]),{validateForm:function(t){var e=this;return new d.a(function(a,o){e.$refs[t].validate(function(t){t?a():o(new Error("Form is not valid"))})})},onSaveComment:function(){var t=this;return m()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.validateForm("dataFormComment");case 3:return t.loadingFormComment=!0,e.next=6,t.addCommentToPost({dataComment:t.dataFormComment});case 6:a=e.sent,t.isVisibleFormComment=!1,t.listComments.unshift(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:return e.prev=14,t.loadingFormComment=!1,e.finish(14);case 17:case"end":return e.stop()}},e,t,[[0,11,14,17]])}))()},getComments:function(){var t=this;return m()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loadingComments=!0,e.next=4,t.fetchListCommentsToPost({postId:t.id});case 4:t.listComments=e.sent,e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),t.$alert({type:"error",message:e.t0.message});case 11:return e.prev=11,t.loadingComments=!1,e.finish(11);case 14:case"end":return e.stop()}},e,t,[[0,7,11,14]])}))()},onLoadData:function(){var t=this;return m()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,t.fetchListPosts();case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),t.$alert({type:"error",message:e.t0.message});case 10:return e.prev=10,t.loading=!1,e.finish(10);case 13:case"end":return e.stop()}},e,t,[[0,6,10,13]])}))()}}),mounted:function(){this.dataPost&&"object"===u()(this.dataPost)&&this.getComments()},created:function(){this.onLoadData()}},f=C,g=a(29),_=Object(g.a)(f,o,n,!1,null,null,null);e.default=_.exports}});